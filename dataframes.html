
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Data Frames in Python &#8212; Geospatial Analysis with Python</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'dataframes';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Interactive Visualizations" href="visualizations.html" />
    <link rel="prev" title="Functions in Python" href="functions.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.png" class="logo__image only-light" alt="Geospatial Analysis with Python - Home"/>
    <img src="_static/logo.png" class="logo__image only-dark pst-js-only" alt="Geospatial Analysis with Python - Home"/>
  
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Geospatial Analysis with Python
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="markdown.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="guide.html">Tutorial Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="loading_geodata.html">Loading Geospatial Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="vector_operations.html">Basic Vector Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_operations.html">Basic Raster Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="functions.html">Functions in Python</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Data Frames in Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="visualizations.html">Interactive Visualizations</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/Ohm-Np/Python_tutorial" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/Ohm-Np/Python_tutorial/issues/new?title=Issue%20on%20page%20%2Fdataframes.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/dataframes.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Data Frames in Python</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-data-frames">Creating Data Frames</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#accessing-and-modifying-data">Accessing and Modifying Data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-frame-operations">Data Frame Operations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#geospatial-data-frames">Geospatial Data Frames</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-gdf">Creating GDF</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#manipulating-gdf">Manipulating GDF</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#visualization-of-gdf">Visualization of GDF</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#vector-geodataframe">Vector GeoDataFrame</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#structure">Structure</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-new-columns">Adding New Columns</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#arithmetic-computation">Arithmetic Computation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#selecting-and-filtering">Selecting and Filtering</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#grouping-and-summarizing">Grouping and Summarizing</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pivoting-and-reshaping">Pivoting and Reshaping</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#visualization">Visualization</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#raster-geodataframe">Raster GeoDataFrame</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-a-raster-data">Creating a Raster Data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#coverting-raster-to-gdf">Coverting Raster to GDF</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#summarize-raster-values">Summarize Raster Values</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#identify-high-density-regions">Identify High-Density Regions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#classify-raster-data">Classify Raster Data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#change-identification">Change Identification</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="data-frames-in-python">
<h1>Data Frames in Python<a class="headerlink" href="#data-frames-in-python" title="Link to this heading">#</a></h1>
<style> p { text-align: justify; } </style>
<p>A data frame is a two-dimensional, size-mutable, and heterogeneous data structure. Think of it as a table or spreadsheet where rows represent records and columns represent variables or attributes. In Python, the <code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code> class is used to represent data frames.</p>
<p>Key characteristics of data frames:</p>
<ul class="simple">
<li><p>Columns can contain different data types (e.g., numeric, character, factor).</p></li>
<li><p>Rows represent individual observations or cases.</p></li>
<li><p>Data frames can hold large datasets efficiently.</p></li>
</ul>
<section id="creating-data-frames">
<h2>Creating Data Frames<a class="headerlink" href="#creating-data-frames" title="Link to this heading">#</a></h2>
<p>A data frame can be created from various data types:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="c1"># Creating a data from a dictionary</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;Name&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Amrit&quot;</span><span class="p">,</span> <span class="s2">&quot;Ishwor&quot;</span><span class="p">,</span> <span class="s2">&quot;Indra&quot;</span><span class="p">,</span> <span class="s2">&quot;Rakshya&quot;</span><span class="p">],</span>
    <span class="s2">&quot;Age&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">27</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">25</span><span class="p">],</span>
    <span class="s2">&quot;Grade&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">],</span>
    <span class="s2">&quot;Major&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Maths&quot;</span><span class="p">,</span> <span class="s2">&quot;Science&quot;</span><span class="p">,</span> <span class="s2">&quot;Maths&quot;</span><span class="p">,</span> <span class="s2">&quot;Science&quot;</span><span class="p">]</span>
<span class="p">}</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="c1"># Display the data frame</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>      Name  Age Grade    Major
0    Amrit   27     A    Maths
1   Ishwor   24     B  Science
2    Indra   21     A    Maths
3  Rakshya   25     B  Science
</pre></div>
</div>
</div>
</div>
</section>
<section id="accessing-and-modifying-data">
<h2>Accessing and Modifying Data<a class="headerlink" href="#accessing-and-modifying-data" title="Link to this heading">#</a></h2>
<p><strong>Selecting Rows and Columns</strong></p>
<p>We can access elements of a data frame using indexing, column names, or logical conditions.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Access a column</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;Name&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0      Amrit
1     Ishwor
2      Indra
3    Rakshya
Name: Name, dtype: object
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Access a row by index</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Name     Amrit
Age         27
Grade        A
Major    Maths
Name: 0, dtype: object
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Access a specific value</span>
<span class="n">value</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;Name&quot;</span><span class="p">]</span>  <span class="c1"># Using label-based indexing</span>
<span class="nb">print</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Indra
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Using position-based indexing</span>
<span class="n">value</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>  
<span class="nb">print</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Indra
</pre></div>
</div>
</div>
</div>
<p><strong>Adding and Removing Columns</strong></p>
<p>We can add a new column to a data frame dynamically or remove an existing column.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Add a column &#39;Pass&#39; where students with Grade &#39;A&#39; are True</span>
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;Pass&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;Grade&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;A&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>      Name  Age Grade    Major   Pass
0    Amrit   27     A    Maths   True
1   Ishwor   24     B  Science  False
2    Indra   21     A    Maths   True
3  Rakshya   25     B  Science  False
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Remove the &#39;Grade&#39; column</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Grade&quot;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>      Name  Age    Major   Pass
0    Amrit   27    Maths   True
1   Ishwor   24  Science  False
2    Indra   21    Maths   True
3  Rakshya   25  Science  False
</pre></div>
</div>
</div>
</div>
</section>
<section id="data-frame-operations">
<h2>Data Frame Operations<a class="headerlink" href="#data-frame-operations" title="Link to this heading">#</a></h2>
<p><strong>Filtering and Subsetting</strong></p>
<p>We can filter rows based on conditions using logical operators.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Filter rows where Age &gt; 22</span>
<span class="n">filtered_df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;Age&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">22</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">filtered_df</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>      Name  Age    Major   Pass
0    Amrit   27    Maths   True
1   Ishwor   24  Science  False
3  Rakshya   25  Science  False
</pre></div>
</div>
</div>
</div>
<p><strong>Sorting and Reordering</strong></p>
<p>Sorting a data frame is straightforward with the <code class="docutils literal notranslate"><span class="pre">sort_values()</span></code> method.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Sort by the &#39;Age&#39; column in ascending order</span>
<span class="n">df_sorted</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">&quot;Age&quot;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df_sorted</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>      Name  Age    Major   Pass
2    Indra   21    Maths   True
1   Ishwor   24  Science  False
3  Rakshya   25  Science  False
0    Amrit   27    Maths   True
</pre></div>
</div>
</div>
</div>
<p><strong>Summary and Statistical Functions</strong></p>
<p>The <code class="docutils literal notranslate"><span class="pre">.describe()</span></code> method in pandas provides a summary of each column in a DataFrame. Here’s how:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Summary of the DataFrame (Descriptive statistics)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">describe</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>         Age
count   4.00
mean   24.25
std     2.50
min    21.00
25%    23.25
50%    24.50
75%    25.50
max    27.00
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Get number of rows and columns</span>
<span class="n">num_rows</span><span class="p">,</span> <span class="n">num_cols</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Number of rows: </span><span class="si">{</span><span class="n">num_rows</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Number of columns: </span><span class="si">{</span><span class="n">num_cols</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Number of rows: 4
Number of columns: 4
</pre></div>
</div>
</div>
</div>
<p><strong>Aggregation and Grouping</strong></p>
<p>The <code class="docutils literal notranslate"><span class="pre">groupby</span></code> method in pandas along with aggregation functions enable aggregation and grouping.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Group by &#39;Major&#39; and calculate the average age</span>
<span class="n">grouped_df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;Major&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">Average_Age</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Age&quot;</span><span class="p">,</span> <span class="s2">&quot;mean&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">grouped_df</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>     Major  Average_Age
0    Maths         24.0
1  Science         24.5
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">groupby</span></code> groups the data frame by the ‘Major’ column</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">agg</span></code> applies the mean function to the ‘Age’ column and renames the result to ‘Average_Age’</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">reset_index()</span></code> resets the index so the grouped column “Major” becomes a regular column in the resulting data frame.</p></li>
</ul>
<p>So far, this chapter has introduced you to the versatility and power of data frames in Python, laying the foundation for data manipulation and analysis. Now, we will delve into data frames specifically designed for geospatial data.</p>
</section>
<section id="geospatial-data-frames">
<h2>Geospatial Data Frames<a class="headerlink" href="#geospatial-data-frames" title="Link to this heading">#</a></h2>
<p>A Geospatial Data Frame (GeoDataFrame) extends a standard data frame by incorporating a geometry column that holds spatial data, such as points, lines, and polygons. This combination of spatial and attribute data makes geospatial data frames particularly useful for spatial analysis and mapping.</p>
<p>In Python, the <code class="docutils literal notranslate"><span class="pre">GeoPandas</span></code> library is often used to handle geospatial data frames, providing easy-to-use structures for working with vector data and offering compatibility with other libraries for geospatial and statistical analysis.</p>
<p>The geometry is a key component of geospatial data frames, defining the spatial features for each observation. Each row represents a spatial feature linked to its attributes, and the geometry column typically stores spatial data in formats such as GeoJSON, WKT (Well-Known Text), or binary formats like WKB (Well-Known Binary).</p>
<section id="creating-gdf">
<h3>Creating GDF<a class="headerlink" href="#creating-gdf" title="Link to this heading">#</a></h3>
<p>You can create a geospatial data frame using <code class="docutils literal notranslate"><span class="pre">GeoPandas</span></code>. Here’s an example:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">shapely.geometry</span> <span class="kn">import</span> <span class="n">Point</span>

<span class="c1"># Create a data frame with spatial data</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;Name&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Point A&quot;</span><span class="p">,</span> <span class="s2">&quot;Point B&quot;</span><span class="p">,</span> <span class="s2">&quot;Point C&quot;</span><span class="p">],</span>
    <span class="s2">&quot;Latitude&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">27.7</span><span class="p">,</span> <span class="mf">28.2</span><span class="p">,</span> <span class="mf">26.9</span><span class="p">],</span>
    <span class="s2">&quot;Longitude&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">85.3</span><span class="p">,</span> <span class="mf">84.9</span><span class="p">,</span> <span class="mf">83.8</span><span class="p">]</span>
<span class="p">}</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="c1"># Convert to a GeoDataFrame</span>
<span class="n">geometry</span> <span class="o">=</span> <span class="p">[</span><span class="n">Point</span><span class="p">(</span><span class="n">xy</span><span class="p">)</span> <span class="k">for</span> <span class="n">xy</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;Longitude&quot;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;Latitude&quot;</span><span class="p">])]</span>
<span class="n">geo_data</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">geometry</span><span class="o">=</span><span class="n">geometry</span><span class="p">)</span>

<span class="c1"># Set the coordinate reference system (CRS) to WGS 84</span>
<span class="n">geo_data</span><span class="o">.</span><span class="n">set_crs</span><span class="p">(</span><span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Print the GeoDataFrame</span>
<span class="nb">print</span><span class="p">(</span><span class="n">geo_data</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>      Name  Latitude  Longitude           geometry
0  Point A      27.7       85.3  POINT (85.3 27.7)
1  Point B      28.2       84.9  POINT (84.9 28.2)
2  Point C      26.9       83.8  POINT (83.8 26.9)
</pre></div>
</div>
</div>
</div>
</section>
<section id="manipulating-gdf">
<h3>Manipulating GDF<a class="headerlink" href="#manipulating-gdf" title="Link to this heading">#</a></h3>
<p><strong>Spatial Queries</strong></p>
<p>Geospatial data frames support operations like spatial filtering and proximity analysis.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">shapely.geometry</span> <span class="kn">import</span> <span class="n">box</span>

<span class="c1"># Define a bounding box and convert it to a geometry object</span>
<span class="n">bbox</span> <span class="o">=</span> <span class="n">box</span><span class="p">(</span><span class="mi">84</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">86</span><span class="p">,</span> <span class="mi">29</span><span class="p">)</span>  <span class="c1"># xmin, ymin, xmax, ymax</span>
<span class="n">bbox_polygon</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoSeries</span><span class="p">([</span><span class="n">bbox</span><span class="p">],</span> <span class="n">crs</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span><span class="p">)</span>

<span class="c1"># Filter points within the bounding box</span>
<span class="n">filtered_data</span> <span class="o">=</span> <span class="n">geo_data</span><span class="p">[</span><span class="n">geo_data</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">within</span><span class="p">(</span><span class="n">bbox_polygon</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">])]</span>

<span class="c1"># Print filtered data</span>
<span class="nb">print</span><span class="p">(</span><span class="n">filtered_data</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>      Name  Latitude  Longitude           geometry
0  Point A      27.7       85.3  POINT (85.3 27.7)
1  Point B      28.2       84.9  POINT (84.9 28.2)
</pre></div>
</div>
</div>
</div>
<p><strong>Attribute-Based Operations</strong></p>
<p>Just like standard data frames, we can manipulate attributes in geospatial data frames.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Add a new column for Elevation</span>
<span class="n">geo_data</span><span class="p">[</span><span class="s1">&#39;Elevation&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1500</span><span class="p">,</span> <span class="mi">2000</span><span class="p">,</span> <span class="mi">1700</span><span class="p">]</span>

<span class="c1"># Print the updated GeoDataFrame</span>
<span class="nb">print</span><span class="p">(</span><span class="n">geo_data</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>      Name  Latitude  Longitude           geometry  Elevation
0  Point A      27.7       85.3  POINT (85.3 27.7)       1500
1  Point B      28.2       84.9  POINT (84.9 28.2)       2000
2  Point C      26.9       83.8  POINT (83.8 26.9)       1700
</pre></div>
</div>
</div>
</div>
</section>
<section id="visualization-of-gdf">
<h3>Visualization of GDF<a class="headerlink" href="#visualization-of-gdf" title="Link to this heading">#</a></h3>
<p>Geospatial data frames can be visualized using the <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> library.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="c1"># Plot the GeoDataFrame</span>
<span class="n">geo_data</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Geospatial Data Points&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/6125bf1db1ac7630c7b60083adb9c53a4bd45f378618ef6f381e7a64ad312c66.png" src="_images/6125bf1db1ac7630c7b60083adb9c53a4bd45f378618ef6f381e7a64ad312c66.png" />
</div>
</div>
<p>Geospatial data frames bridge the gap between tabular data and spatial analysis, making them indispensable for modern geospatial workflows. Their versatility, combined with Python’s ecosystem of geospatial libraries, provides an efficient and intuitive way to analyze and visualize spatial data.</p>
</section>
</section>
<section id="vector-geodataframe">
<h2>Vector GeoDataFrame<a class="headerlink" href="#vector-geodataframe" title="Link to this heading">#</a></h2>
<p>In Python, the <code class="docutils literal notranslate"><span class="pre">GeoDataFrame</span></code> from the <code class="docutils literal notranslate"><span class="pre">GeoPandas</span></code> library is used to represent vector-based spatial data. A GeoDataFrame combines both <em>spatial</em> and <em>tabular</em> data, making it ideal for spatial analysis and data manipulation. It is essentially a data frame with a special geometry column that contains spatial data, such as points, lines, and polygons.</p>
<p>With a GeoDataFrame, you can perform typical data manipulation tasks, such as filtering, summarizing, and joining, on the tabular data. At the same time, it allows for spatial operations like plotting, spatial indexing, and spatial joins. The <strong>tabular</strong> portion of a GeoDataFrame allows you to perform standard data frame operations (like groupby, sort, merge), while the geometry column enables you to carry out spatial analysis and visualization.</p>
<p>This section will focus on working with geospatial data, such as the vector data for the Kanchanpur district in Nepal, available in GeoPackage (.gpkg) format. You can download this data, load it using GeoPandas, and perform both spatial and tabular operations. The GeoDataFrame provides a powerful tool for handling, analyzing, and visualizing geographic data, seamlessly integrating both spatial and non-spatial aspects of analysis.</p>
<section id="structure">
<h3>Structure<a class="headerlink" href="#structure" title="Link to this heading">#</a></h3>
<p>The vector GeoDataFrame contains both the geometry column and attribute data.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>

<span class="c1"># Import the GeoDataFrame</span>
<span class="n">vector_data</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="s2">&quot;data/vector/kanchanpur.gpkg&quot;</span><span class="p">)</span>

<span class="c1"># View the structure of the GeoDataFrame</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vector_data</span><span class="o">.</span><span class="n">info</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;geopandas.geodataframe.GeoDataFrame&#39;&gt;
RangeIndex: 21 entries, 0 to 20
Data columns (total 2 columns):
 #   Column    Non-Null Count  Dtype   
---  ------    --------------  -----   
 0   NAME      21 non-null     object  
 1   geometry  21 non-null     geometry
dtypes: geometry(1), object(1)
memory usage: 464.0+ bytes
None
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Display the first few rows</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vector_data</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>           NAME                                           geometry
0  BaisiBichawa  MULTIPOLYGON (((80.49934 28.64667, 80.49709 28...
1      Beldandi  MULTIPOLYGON (((80.25229 28.75782, 80.25377 28...
2      Chandani  MULTIPOLYGON (((80.10973 28.98432, 80.10986 28...
3        Daijee  MULTIPOLYGON (((80.34424 29.05416, 80.34449 29...
4   Dekhatbhuli  MULTIPOLYGON (((80.44701 28.78921, 80.43608 28...
</pre></div>
</div>
</div>
</div>
</section>
<section id="adding-new-columns">
<h3>Adding New Columns<a class="headerlink" href="#adding-new-columns" title="Link to this heading">#</a></h3>
<p>In Python, you can add a new column to a GeoDataFrame in a similar way you would add it to a regular DataFrame using <code class="docutils literal notranslate"><span class="pre">pandas</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Add a new column - Population</span>
<span class="n">vector_data</span><span class="p">[</span><span class="s1">&#39;Population&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
    <span class="mi">37900</span><span class="p">,</span> <span class="mi">46565</span><span class="p">,</span> <span class="mi">72813</span><span class="p">,</span> <span class="mi">49223</span><span class="p">,</span> <span class="mi">52221</span><span class="p">,</span> <span class="mi">64436</span><span class="p">,</span> <span class="mi">40823</span><span class="p">,</span>
    <span class="mi">97216</span><span class="p">,</span> <span class="mi">36368</span><span class="p">,</span> <span class="mi">277108</span><span class="p">,</span> <span class="mi">51835</span><span class="p">,</span> <span class="mi">38199</span><span class="p">,</span> <span class="mi">46773</span><span class="p">,</span> <span class="mi">44571</span><span class="p">,</span>
    <span class="mi">48838</span><span class="p">,</span> <span class="mi">11581</span><span class="p">,</span> <span class="mi">131</span><span class="p">,</span> <span class="mi">19211</span><span class="p">,</span> <span class="mi">56755</span><span class="p">,</span> <span class="mi">58257</span><span class="p">,</span> <span class="mi">37573</span>
<span class="p">]</span>

<span class="c1"># Display the updated GeoDataFrame</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vector_data</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>           NAME                                           geometry  Population
0  BaisiBichawa  MULTIPOLYGON (((80.49934 28.64667, 80.49709 28...       37900
1      Beldandi  MULTIPOLYGON (((80.25229 28.75782, 80.25377 28...       46565
2      Chandani  MULTIPOLYGON (((80.10973 28.98432, 80.10986 28...       72813
3        Daijee  MULTIPOLYGON (((80.34424 29.05416, 80.34449 29...       49223
4   Dekhatbhuli  MULTIPOLYGON (((80.44701 28.78921, 80.43608 28...       52221
</pre></div>
</div>
</div>
</div>
</section>
<section id="arithmetic-computation">
<h3>Arithmetic Computation<a class="headerlink" href="#arithmetic-computation" title="Link to this heading">#</a></h3>
<p>In Python, you can calculate the area of each geometry in a <code class="docutils literal notranslate"><span class="pre">GeoDataFrame</span></code> and create a new column for population density as follows:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Reproject vector data to a projected CRS (e.g., UTM zone 45N for this area)</span>
<span class="n">vector_data</span> <span class="o">=</span> <span class="n">vector_data</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">epsg</span><span class="o">=</span><span class="mi">32645</span><span class="p">)</span>

<span class="c1"># Calculate the area of each district (in square meters)</span>
<span class="n">vector_data</span><span class="p">[</span><span class="s1">&#39;area_m2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vector_data</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">area</span>

<span class="c1"># Convert the area from square meters to square kilometers</span>
<span class="n">vector_data</span><span class="p">[</span><span class="s1">&#39;area_km2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vector_data</span><span class="p">[</span><span class="s1">&#39;area_m2&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mf">1e6</span>

<span class="c1"># Add a new column with density (population/area)</span>
<span class="n">vector_data</span><span class="p">[</span><span class="s1">&#39;Density&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vector_data</span><span class="p">[</span><span class="s1">&#39;Population&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">vector_data</span><span class="p">[</span><span class="s1">&#39;area_km2&#39;</span><span class="p">]</span>

<span class="c1"># Display the updated GeoDataFrame</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vector_data</span><span class="p">[[</span><span class="s1">&#39;NAME&#39;</span><span class="p">,</span> <span class="s1">&#39;Population&#39;</span><span class="p">,</span> <span class="s1">&#39;area_km2&#39;</span><span class="p">,</span> <span class="s1">&#39;Density&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>           NAME  Population    area_km2      Density
0  BaisiBichawa       37900   74.476642   508.884384
1      Beldandi       46565   24.906232  1869.612393
2      Chandani       72813   32.517201  2239.214842
3        Daijee       49223  102.823123   478.715280
4   Dekhatbhuli       52221   91.109522   573.167312
</pre></div>
</div>
</div>
</div>
</section>
<section id="selecting-and-filtering">
<h3>Selecting and Filtering<a class="headerlink" href="#selecting-and-filtering" title="Link to this heading">#</a></h3>
<p>You can filter the data using <code class="docutils literal notranslate"><span class="pre">GeoDataFrame</span></code> from <code class="docutils literal notranslate"><span class="pre">geopandas</span></code>. Here’s how you can select specific columns and display the first few rows:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Select specific columns (e.g., &quot;NAME&quot; and &quot;Population&quot;)</span>
<span class="n">selected_data</span> <span class="o">=</span> <span class="n">vector_data</span><span class="p">[[</span><span class="s1">&#39;NAME&#39;</span><span class="p">,</span> <span class="s1">&#39;Population&#39;</span><span class="p">]]</span>

<span class="c1"># Display the first few rows</span>
<span class="nb">print</span><span class="p">(</span><span class="n">selected_data</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>           NAME  Population
0  BaisiBichawa       37900
1      Beldandi       46565
2      Chandani       72813
3        Daijee       49223
4   Dekhatbhuli       52221
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Filter rows where Population is greater than 60,000</span>
<span class="n">filtered_data</span> <span class="o">=</span> <span class="n">vector_data</span><span class="p">[</span><span class="n">vector_data</span><span class="p">[</span><span class="s1">&#39;Population&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">60000</span><span class="p">]</span>

<span class="c1"># Display the filtered data (similar to tibble in R)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">filtered_data</span><span class="p">[[</span><span class="s1">&#39;NAME&#39;</span><span class="p">,</span> <span class="s1">&#39;Population&#39;</span><span class="p">,</span> <span class="s1">&#39;Density&#39;</span><span class="p">,</span> <span class="s1">&#39;area_km2&#39;</span><span class="p">]])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>       NAME  Population      Density   area_km2
2  Chandani       72813  2239.214842  32.517201
5   Dodhara       64436  2591.163947  24.867589
7    Kalika       97216  3789.177761  25.656226
9  Laxmipur      277108  9518.765708  29.111758
</pre></div>
</div>
</div>
</div>
</section>
<section id="grouping-and-summarizing">
<h3>Grouping and Summarizing<a class="headerlink" href="#grouping-and-summarizing" title="Link to this heading">#</a></h3>
<p>Grouping and summarizing operations are common in data analysis. You can group data based on an attribute and calculate summary statistics for each group.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Group by &#39;NAME&#39; and calculate the total population and average density</span>
<span class="n">region_summary</span> <span class="o">=</span> <span class="n">vector_data</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;NAME&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span>
    <span class="n">total_population</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;Population&#39;</span><span class="p">,</span> <span class="s1">&#39;sum&#39;</span><span class="p">),</span>
    <span class="n">average_density</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;Density&#39;</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

<span class="c1"># Display the result</span>
<span class="nb">print</span><span class="p">(</span><span class="n">region_summary</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>                  NAME  total_population  average_density
0         BaisiBichawa             37900       508.884384
1             Beldandi             46565      1869.612393
2             Chandani             72813      2239.214842
3               Daijee             49223       478.715280
4          Dekhatbhuli             52221       573.167312
5              Dodhara             64436      2591.163947
6              Jhalari             40823       332.137920
7               Kalika             97216      3789.177761
8           Krishnapur             36368       218.213683
9             Laxmipur            277108      9518.765708
10   MahendranagarN.P.             51835       299.845566
11             Parasan             38199      1004.067157
12            Pipaladi             46773      1087.800781
13     RaikawarBichawa             44571       545.906632
14      RampurBilaspur             48838      1236.669117
15      RauteliBichawa             11581       382.064494
16  Royal Shuklaphanta               131         0.360413
17          Shankarpur             19211       538.994951
18             Sreepur             56755      1012.202386
19                Suda             58257      1001.135055
20      Tribhuwanbasti             37573      1911.038295
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">groupby('NAME')</span></code>: Groups the GeoDataFrame by the NAME column, which represents different villages in Kanchanpur district.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">agg()</span></code>: Used to specify the aggregation functions. Here, it calculates the sum of <code class="docutils literal notranslate"><span class="pre">Population</span></code> and the mean of <code class="docutils literal notranslate"><span class="pre">Density</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">reset_index()</span></code>: Resets the index after the grouping operation to make sure the resulting <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> is formatted properly.</p></li>
</ul>
</section>
<section id="pivoting-and-reshaping">
<h3>Pivoting and Reshaping<a class="headerlink" href="#pivoting-and-reshaping" title="Link to this heading">#</a></h3>
<p>In Python, you can achieve pivoting and reshaping using pandas.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Drop geometry column and pivot data into long format</span>
<span class="n">long_format</span> <span class="o">=</span> <span class="n">vector_data</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s1">&#39;geometry&#39;</span><span class="p">)</span> \
                         <span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">id_vars</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;NAME&quot;</span><span class="p">],</span> <span class="n">value_vars</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Population&quot;</span><span class="p">,</span> <span class="s2">&quot;Density&quot;</span><span class="p">],</span> 
                               <span class="n">var_name</span><span class="o">=</span><span class="s2">&quot;attribute&quot;</span><span class="p">,</span> <span class="n">value_name</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>

<span class="c1"># Display the first and middle few rows of the reshaped DataFrame</span>
<span class="nb">print</span><span class="p">(</span><span class="n">long_format</span><span class="o">.</span><span class="n">iloc</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">21</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">23</span><span class="p">],</span> <span class="p">:])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>            NAME   attribute         value
0   BaisiBichawa  Population  37900.000000
1       Beldandi  Population  46565.000000
2       Chandani  Population  72813.000000
21  BaisiBichawa     Density    508.884384
22      Beldandi     Density   1869.612393
23      Chandani     Density   2239.214842
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">drop(columns='geometry')</span></code>: This removes the geometry column since it’s not needed for reshaping the tabular data.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">melt()</span></code>: This function is used to pivot data from wide to long format.</p></li>
</ul>
</section>
<section id="visualization">
<h3>Visualization<a class="headerlink" href="#visualization" title="Link to this heading">#</a></h3>
<p>To plot the population density from a GeoDataFrame using <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> and <code class="docutils literal notranslate"><span class="pre">geopandas</span></code>, you can do the following:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="c1"># Reproject vector data to a projected CRS (e.g., UTM zone 45N for this area)</span>
<span class="n">vector_data</span> <span class="o">=</span> <span class="n">vector_data</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>

<span class="c1"># Plot the Population Density</span>
<span class="n">vector_data</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="s1">&#39;Density&#39;</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;viridis&#39;</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Population Density&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/b4cc4a81827b73b21a1d972081ee4fc2880ff7ecdd2582024fdd97b1a3072e4e.png" src="_images/b4cc4a81827b73b21a1d972081ee4fc2880ff7ecdd2582024fdd97b1a3072e4e.png" />
</div>
</div>
</section>
</section>
<section id="raster-geodataframe">
<h2>Raster GeoDataFrame<a class="headerlink" href="#raster-geodataframe" title="Link to this heading">#</a></h2>
<p>A Raster GeoDataFrame extends the concept of a standard GeoDataFrame to represent raster data in a <code class="docutils literal notranslate"><span class="pre">tabular</span></code> format, integrating spatial information with associated metadata. While raster data is inherently grid-based, a Raster GeoDataFrame provides a structured way to store additional attributes, such as statistics, classification information, or metadata, alongside spatial references. This format is particularly useful for working with tiled or multi-resolution raster datasets, enabling seamless integration with vector data workflows. By combining the tabular nature of data frames with the grid structure of raster data, it facilitates efficient querying, visualization, and analysis of geospatial raster datasets.</p>
<section id="creating-a-raster-data">
<h3>Creating a Raster Data<a class="headerlink" href="#creating-a-raster-data" title="Link to this heading">#</a></h3>
<p>The python uses <code class="docutils literal notranslate"><span class="pre">numpy</span></code> to create random raster data and <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> to visualize it. The <code class="docutils literal notranslate"><span class="pre">rasterio</span></code> package is included to define the raster’s metadata and coordinate reference, though it isn’t required for basic visualization. If you’d like, this data can be saved to a file using rasterio.</p>
<p>Creating a raster dataset with random values and plotting it:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">rasterio</span>
<span class="kn">from</span> <span class="nn">rasterio.plot</span> <span class="kn">import</span> <span class="n">show</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="c1"># Create a raster-like array with random values</span>
<span class="n">rows</span><span class="p">,</span> <span class="n">cols</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span>
<span class="n">raster_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">cols</span><span class="p">))</span>

<span class="c1"># Define metadata for the raster</span>
<span class="n">transform</span> <span class="o">=</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">from_origin</span><span class="p">(</span><span class="n">west</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">north</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">xsize</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ysize</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Example transform</span>
<span class="n">meta</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;driver&#39;</span><span class="p">:</span> <span class="s1">&#39;GTiff&#39;</span><span class="p">,</span>
    <span class="s1">&#39;dtype&#39;</span><span class="p">:</span> <span class="s1">&#39;float32&#39;</span><span class="p">,</span>
    <span class="s1">&#39;nodata&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="s1">&#39;width&#39;</span><span class="p">:</span> <span class="n">cols</span><span class="p">,</span>
    <span class="s1">&#39;height&#39;</span><span class="p">:</span> <span class="n">rows</span><span class="p">,</span>
    <span class="s1">&#39;count&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s1">&#39;crs&#39;</span><span class="p">:</span> <span class="s1">&#39;+proj=latlong&#39;</span><span class="p">,</span>
    <span class="s1">&#39;transform&#39;</span><span class="p">:</span> <span class="n">transform</span>
<span class="p">}</span>

<span class="c1"># Plot the raster</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">raster_data</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;viridis&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Random Values (0-200)&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Random Raster Data&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/b7a974801d89ffbee6867b998bc3dfa377dfd0c03b6adab56aeafa1913d5a185.png" src="_images/b7a974801d89ffbee6867b998bc3dfa377dfd0c03b6adab56aeafa1913d5a185.png" />
</div>
</div>
</section>
<section id="coverting-raster-to-gdf">
<h3>Coverting Raster to GDF<a class="headerlink" href="#coverting-raster-to-gdf" title="Link to this heading">#</a></h3>
<p>Here’s how you can convert raster data to a DataFrame in Python and view the first few rows/columns:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># Convert the raster array to a DataFrame</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">raster_data</span><span class="p">)</span>

<span class="c1"># Display the first few rows</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>            0           1           2           3
0  199.172857  107.906103  159.906918   72.584753
1  131.498538   34.224409    1.356723   68.068344
2  182.463776    5.870929   84.674355  166.392486
3   64.542982   81.521668  109.441069   10.408659
</pre></div>
</div>
</div>
</div>
<p>If you’d like to include spatial information (e.g., row and column indices as spatial coordinates), here’s how you can do it:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Add spatial coordinates (row and column indices)</span>
<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">cols</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="n">rows</span><span class="p">))</span>  <span class="c1"># Create grid of coordinates</span>

<span class="n">df_with_coords</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span>
    <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="n">y</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span>
    <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">raster_data</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
<span class="p">})</span>

<span class="c1"># Display the first few rows</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df_with_coords</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>   x  y       value
0  0  0  199.172857
1  1  0  107.906103
2  2  0  159.906918
3  3  0   72.584753
4  4  0   42.337581
</pre></div>
</div>
</div>
</div>
<p>This approach provides both the raster values and their respective spatial coordinates, enabling easier manipulation and analysis of the data.</p>
</section>
<section id="summarize-raster-values">
<h3>Summarize Raster Values<a class="headerlink" href="#summarize-raster-values" title="Link to this heading">#</a></h3>
<p>In this subsection, we will load the Population Count raster data for the year 2020.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">rasterio</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="c1"># Load the raster data</span>
<span class="n">raster_path</span> <span class="o">=</span> <span class="s2">&quot;data/raster/popCount_2020.tif&quot;</span>

<span class="k">with</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">raster_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">src</span><span class="p">:</span>
    <span class="n">raster_data</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

    <span class="c1"># Plot the raster using Matplotlib</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">raster_data</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;viridis&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Pixel Value&quot;</span><span class="p">)</span> 
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Population Count 2020&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Column Index&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Row Index&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/c1191df759bda19ce54fb4e9ed7f4a8737bdd39243deb2f7ad005f162773faa2.png" src="_images/c1191df759bda19ce54fb4e9ed7f4a8737bdd39243deb2f7ad005f162773faa2.png" />
</div>
</div>
<p>We can calculate basic summary statistics (mean, median, min, max) to get an overview of the population distribution across the region.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span> 

<span class="n">raster_file</span> <span class="o">=</span> <span class="s2">&quot;data/raster/popCount_2020.tif&quot;</span>
<span class="c1"># open the raster file</span>
<span class="k">with</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">raster_file</span><span class="p">)</span> <span class="k">as</span> <span class="n">src</span><span class="p">:</span>

    <span class="c1"># Read the raster data as a numpy array</span>
    <span class="n">raster_data</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># Single band raster</span>

    <span class="c1"># Mask invalid or nodata values </span>
    <span class="c1"># Define a custom condition for masking (e.g., mask zeros)</span>
    <span class="n">masked_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ma</span><span class="o">.</span><span class="n">masked_where</span><span class="p">((</span><span class="n">raster_data</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">raster_data</span><span class="p">),</span> <span class="n">raster_data</span><span class="p">)</span>

    <span class="c1"># Calculate summary statistics</span>
    <span class="n">min_value</span> <span class="o">=</span> <span class="n">masked_data</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
    <span class="n">max_value</span> <span class="o">=</span> <span class="n">masked_data</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
    <span class="n">mean_value</span> <span class="o">=</span> <span class="n">masked_data</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
    <span class="n">median_value</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ma</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="n">masked_data</span><span class="p">)</span>

    <span class="c1"># Print the results</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Minimum value: </span><span class="si">{</span><span class="n">min_value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Maximum value: </span><span class="si">{</span><span class="n">max_value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Mean value: </span><span class="si">{</span><span class="n">mean_value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Median value: </span><span class="si">{</span><span class="n">median_value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Minimum value: 0.1460667997598648
Maximum value: 136.91754150390625
Mean value: 5.2824760935231385
Median value: 2.4147253036499023
</pre></div>
</div>
</div>
</div>
</section>
<section id="identify-high-density-regions">
<h3>Identify High-Density Regions<a class="headerlink" href="#identify-high-density-regions" title="Link to this heading">#</a></h3>
<p>You can extract specific regions of the raster where the population is above a certain threshold, which could be useful for identifying high-density areas.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">rasterio</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">raster_file</span> <span class="o">=</span> <span class="s2">&quot;data/raster/popCount_2020.tif&quot;</span>

<span class="c1"># Define the population density threshold</span>
<span class="n">threshold</span> <span class="o">=</span> <span class="mi">100</span>

<span class="k">with</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">raster_file</span><span class="p">)</span> <span class="k">as</span> <span class="n">src</span><span class="p">:</span>
    <span class="n">raster_data</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Read the first band</span>
    <span class="n">transform</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">transform</span>  <span class="c1"># Get the affine transform</span>

    <span class="c1"># Mask invalid or nodata values </span>
    <span class="c1"># Define a custom condition for masking (e.g., mask zeros)</span>
    <span class="n">masked_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ma</span><span class="o">.</span><span class="n">masked_where</span><span class="p">((</span><span class="n">raster_data</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="o">|</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">raster_data</span><span class="p">),</span> <span class="n">raster_data</span><span class="p">)</span>

    <span class="c1"># Identify high-density cells</span>
    <span class="n">high_density_mask</span> <span class="o">=</span> <span class="n">raster_data</span> <span class="o">&gt;</span> <span class="n">threshold</span>
    <span class="n">high_density_indices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argwhere</span><span class="p">(</span><span class="n">high_density_mask</span><span class="p">)</span>

    <span class="c1"># Convert indices to geographic coordinates</span>
    <span class="n">coordinates_high_density</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">rasterio</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">xy</span><span class="p">(</span><span class="n">transform</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">high_density_indices</span>
    <span class="p">]</span>

    <span class="n">num_high_density_cells</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">coordinates_high_density</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Number of high-density cells: </span><span class="si">{</span><span class="n">num_high_density_cells</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sample coordinates of high-density cells: </span><span class="si">{</span><span class="n">coordinates_high_density</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="c1"># Display first three coordinates</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Number of high-density cells: 549
Sample coordinates of high-density cells: [(80.399999692985, 28.688333420150848), (80.39583302633488, 28.685833420161014), (80.3966663596649, 28.685833420161014)]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="c1"># Coordinates of high-density cells (xyFromCell provides (x, y) coordinates)</span>
<span class="n">x_coords</span><span class="p">,</span> <span class="n">y_coords</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">coordinates_high_density</span><span class="p">)</span>

<span class="c1"># Plot the high-density points</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x_coords</span><span class="p">,</span> <span class="n">y_coords</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;High Density Cells&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;High Density Regions&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Longitude&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Latitude&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/233115865775777d7628759bfa2b1f22a0090f2bcccf2f20bee272902b9d4366.png" src="_images/233115865775777d7628759bfa2b1f22a0090f2bcccf2f20bee272902b9d4366.png" />
</div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">x_coords,</span> <span class="pre">y_coords</span></code>: Unzips the coordinates_high_density to separate x and y values.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scatter</span></code>: Plots the high-density cells as red points on the plot.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">s=5</span></code>: Sets the size of the points.</p></li>
</ul>
</section>
<section id="classify-raster-data">
<h3>Classify Raster Data<a class="headerlink" href="#classify-raster-data" title="Link to this heading">#</a></h3>
<p>To classify raster data into categories (e.g., low, medium, high) in Python, you can use numpy’s <code class="docutils literal notranslate"><span class="pre">cut</span></code> function for creating intervals.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">rasterio</span>

<span class="c1"># Open the raster data</span>
<span class="k">with</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;data/raster/popCount_2020.tif&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">src</span><span class="p">:</span>
    <span class="n">raster_data</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Read the first band (assuming single-band raster)</span>

<span class="c1"># Reclassify the raster values into categories</span>
<span class="n">breaks</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">]</span>  <span class="c1"># Define the class boundaries</span>
<span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Very Low&quot;</span><span class="p">,</span> <span class="s2">&quot;Low&quot;</span><span class="p">,</span> <span class="s2">&quot;Medium&quot;</span><span class="p">,</span> <span class="s2">&quot;High&quot;</span><span class="p">,</span> <span class="s2">&quot;Very High&quot;</span><span class="p">]</span>

<span class="c1"># Use np.digitize to classify the raster values</span>
<span class="n">classified_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">digitize</span><span class="p">(</span><span class="n">raster_data</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">breaks</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Handle the edge case where np.digitize assigns a value greater than the length of the labels</span>
<span class="n">classified_data</span><span class="p">[</span><span class="n">classified_data</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>  <span class="c1"># Ensure index for &#39;Very High&#39;</span>

<span class="c1"># Convert the numeric classification to labels</span>
<span class="n">classified_labels</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">labels</span><span class="p">)[</span><span class="n">classified_data</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>  <span class="c1"># Adjust index for 0-based indexing</span>

<span class="c1"># Create a DataFrame with x, y coordinates and classification</span>
<span class="n">rows</span><span class="p">,</span> <span class="n">cols</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">indices</span><span class="p">(</span><span class="n">raster_data</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="n">df_classified</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="n">cols</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span>
    <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="n">rows</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span>
    <span class="s1">&#39;class&#39;</span><span class="p">:</span> <span class="n">classified_labels</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
<span class="p">})</span>

<span class="c1"># Show the first few rows of the classified DataFrame</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df_classified</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>   x  y      class
0  0  0  Very High
1  1  0  Very High
2  2  0  Very High
3  3  0  Very High
4  4  0  Very High
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">np.digitize</span></code>: Classifies the raster values based on predefined <code class="docutils literal notranslate"><span class="pre">breaks</span></code>. The function returns the indices of which class each value belongs to.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">classified_labels</span></code>: Uses the indices from <code class="docutils literal notranslate"><span class="pre">np.digitize</span></code> to assign the corresponding labels from the <code class="docutils literal notranslate"><span class="pre">labels</span></code> list.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Creating</span> <span class="pre">DataFrame</span></code>: The coordinates of each raster cell <code class="docutils literal notranslate"><span class="pre">(x,</span> <span class="pre">y)</span></code> are flattened into arrays and combined with the classified labels to create a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">right=True</span></code>: Ensures that the right boundary of each bin is included in the classification. For example, values exactly equal to 5 will be classified as “Low”, rather than being excluded.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Edge</span> <span class="pre">Case</span> <span class="pre">Handling</span></code>: If np.digitize assigns an index greater than the size of labels (for values above the last bin), we correct it by explicitly setting those values to the last class (“Very High”).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Adjustment</span> <span class="pre">for</span> <span class="pre">0-based</span> <span class="pre">Indexing</span></code>: Since the labels array is 0-based, we subtract 1 from the classification indices to correctly match the class labels.</p></li>
</ul>
<p>This code will provide the classified raster values as a DataFrame, which you can use for further analysis or visualization.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">matplotlib.colors</span> <span class="kn">import</span> <span class="n">ListedColormap</span>

<span class="c1"># Create a plot to visualize the classified data</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>

<span class="c1"># Custom colors for the classes</span>
<span class="n">cmap</span> <span class="o">=</span> <span class="n">ListedColormap</span><span class="p">([</span><span class="s1">&#39;#f9f9f9&#39;</span><span class="p">,</span> <span class="s1">&#39;#e1f7d5&#39;</span><span class="p">,</span> <span class="s1">&#39;#d4f1a1&#39;</span><span class="p">,</span> <span class="s1">&#39;#e7d300&#39;</span><span class="p">,</span> <span class="s1">&#39;#ff6347&#39;</span><span class="p">])</span>
<span class="n">bounds</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">]</span>
<span class="n">norm</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Plot the classified raster data</span>
<span class="n">cax</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">classified_data</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="n">norm</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Classified Population Density&quot;</span><span class="p">)</span>

<span class="c1"># Add a colorbar with the class labels</span>
<span class="n">colorbar</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">cax</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">ticks</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">)))</span>
<span class="n">colorbar</span><span class="o">.</span><span class="n">set_ticklabels</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>
<span class="n">colorbar</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s1">&#39;Classification&#39;</span><span class="p">)</span>

<span class="c1"># Show the plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/55feda595f30cf69f783146eff63754e27b794ae9858f29758f4fc259fdb26ea.png" src="_images/55feda595f30cf69f783146eff63754e27b794ae9858f29758f4fc259fdb26ea.png" />
</div>
</div>
<p><em>Note: Values outside of your Area of Interest (AOI) show as “Very High,” likely occurs because the raster data outside the AOI is being treated as having the highest value by default. To solve this, you need to mask the raster to focus only on the AOI, ensuring that areas outside the AOI are not processed or classified.</em></p>
</section>
<section id="change-identification">
<h3>Change Identification<a class="headerlink" href="#change-identification" title="Link to this heading">#</a></h3>
<p>If you have multiple rasters representing population data over different time periods, you can compute the changes in population between two periods. Let’s load the Population Count raster data for years 2000 and 2020, so we can compute the changes in population over a 20-year period.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">rasterio</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="c1"># Load population count raster for the year 2000</span>
<span class="n">r1</span> <span class="o">=</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;data/raster/popCount_2000.tif&quot;</span><span class="p">)</span>

<span class="c1"># Load population count raster for the year 2020</span>
<span class="n">r2</span> <span class="o">=</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;data/raster/popCount_2020.tif&quot;</span><span class="p">)</span>

<span class="c1"># Read the population count data as arrays</span>
<span class="n">pop_2000</span> <span class="o">=</span> <span class="n">r1</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">pop_2020</span> <span class="o">=</span> <span class="n">r2</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Population change between 2020 and 2000</span>
<span class="n">population_change</span> <span class="o">=</span> <span class="n">pop_2020</span> <span class="o">-</span> <span class="n">pop_2000</span>

<span class="c1"># Set up a plotting layout: 2 rows, 2 columns</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>

<span class="c1"># Plot the raster using Matplotlib</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">pop_2000</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;viridis&#39;</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Population 2000&quot;</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>

<span class="c1"># Plot the raster using Matplotlib</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">pop_2020</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;viridis&#39;</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Population 2020&quot;</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>

<span class="c1"># Plot the raster using Matplotlib</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">population_change</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;coolwarm&#39;</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Population Change&quot;</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>

<span class="c1"># Reset the layout for default (1 plot)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>  <span class="c1"># Empty subplot as we have only 3 plots</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/855b1fcf31bcc0c28303c41f10d47bdfdb98d1726f8f8f4b650da6e9304bc9eb.png" src="_images/855b1fcf31bcc0c28303c41f10d47bdfdb98d1726f8f8f4b650da6e9304bc9eb.png" />
</div>
</div>
<ul class="simple">
<li><p><strong>Reading the Raster Files:</strong>
– The <code class="docutils literal notranslate"><span class="pre">rasterio.open()</span></code> function is used to open the raster files.
– <code class="docutils literal notranslate"><span class="pre">r1.read(1)</span></code> and <code class="docutils literal notranslate"><span class="pre">r2.read(1)</span></code> read the first band (the population count data) of the raster files as arrays.</p></li>
<li><p><strong>Population Change Calculation:</strong>
– The population change is calculated by subtracting the 2000 population values (<code class="docutils literal notranslate"><span class="pre">pop_2000</span></code>) from the 2020 population values (<code class="docutils literal notranslate"><span class="pre">pop_2020</span></code>).</p></li>
<li><p><strong>Plotting:</strong>
– <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> is used to create the plots. We use <code class="docutils literal notranslate"><span class="pre">imshow</span></code> to display the rasters with the <code class="docutils literal notranslate"><span class="pre">viridis</span></code> colormap for population count and <code class="docutils literal notranslate"><span class="pre">coolwarm</span></code> for population change.
– The layout is set with <code class="docutils literal notranslate"><span class="pre">plt.subplots()</span></code> to create 2 rows and 2 columns, similar to <code class="docutils literal notranslate"><span class="pre">par(mfrow</span> <span class="pre">=</span> <span class="pre">c(2,</span> <span class="pre">2))</span></code> in R.
– We turn off the axes with <code class="docutils literal notranslate"><span class="pre">axis('off')</span></code> for a cleaner plot.</p></li>
</ul>
<p><strong>For this tutorial, this concludes the coverage of Data Frames in Python. If you would like to explore additional examples, or need clarification on any of the steps covered, please visit the GitHub repository: <a class="reference external" href="https://github.com/Ohm-Np/Python_tutorial">Python_tutorial</a> and feel free to open an issue.</strong></p>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="functions.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Functions in Python</p>
      </div>
    </a>
    <a class="right-next"
       href="visualizations.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Interactive Visualizations</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-data-frames">Creating Data Frames</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#accessing-and-modifying-data">Accessing and Modifying Data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-frame-operations">Data Frame Operations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#geospatial-data-frames">Geospatial Data Frames</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-gdf">Creating GDF</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#manipulating-gdf">Manipulating GDF</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#visualization-of-gdf">Visualization of GDF</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#vector-geodataframe">Vector GeoDataFrame</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#structure">Structure</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-new-columns">Adding New Columns</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#arithmetic-computation">Arithmetic Computation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#selecting-and-filtering">Selecting and Filtering</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#grouping-and-summarizing">Grouping and Summarizing</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pivoting-and-reshaping">Pivoting and Reshaping</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#visualization">Visualization</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#raster-geodataframe">Raster GeoDataFrame</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-a-raster-data">Creating a Raster Data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#coverting-raster-to-gdf">Coverting Raster to GDF</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#summarize-raster-values">Summarize Raster Values</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#identify-high-density-regions">Identify High-Density Regions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#classify-raster-data">Classify Raster Data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#change-identification">Change Identification</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Om Prakash Bhandari
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>